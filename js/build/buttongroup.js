!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CKEditor5=e():(t.CKEditor5=t.CKEditor5||{},t.CKEditor5.buttongroup=e())}(self,(()=>(()=>{var t=[(t,e,o)=>{t.exports=o(1)("./src/core.js")},t=>{"use strict";t.exports=CKEditor5.dll},(t,e,o)=>{t.exports=o(1)("./src/widget.js")},,(t,e,o)=>{t.exports=o(1)("./src/ui.js")}],e={};function o(n){var i=e[n];if(void 0!==i)return i.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,o),r.exports}o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var n={};return(()=>{"use strict";o.d(n,{default:()=>h});var t=o(0),e=o(2),i=o(4);const r={large:{label:"Large",icon:t.icons.large,className:"ucb-link-button-large"},regular:{label:"Regular",icon:t.icons.regular,className:"ucb-link-button-regular"},small:{label:"Small",icon:t.icons.small,className:"ucb-link-button-small"}},s="regular",l={blue:{label:"Blue",className:"ucb-link-button-blue"},black:{label:"Black",className:"ucb-link-button-black"},gray:{label:"Gray",className:"ucb-link-button-gray"},white:{label:"White",className:"ucb-link-button-white"},gold:{label:"Gold",className:"ucb-link-button-gold"}},u="black";class a extends t.Plugin{static get requires(){return[e.WidgetToolbarRepository]}init(){const t=this.editor,e=t.commands,o=t.ui.componentFactory;o.add("buttonGroup",(o=>{const n=new i.ButtonView(o),r=e.get("insertButtonGroup");return n.label="Button Group",n.icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--! Font Awesome Pro 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M297.4 9.4c12.5-12.5 32.8-12.5 45.3 0l96 96c12.5 12.5 12.5 32.8 0 45.3l-96 96c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L338.7 160H128c-35.3 0-64 28.7-64 64v32c0 17.7-14.3 32-32 32s-32-14.3-32-32V224C0 153.3 57.3 96 128 96H338.7L297.4 54.6c-12.5-12.5-12.5-32.8 0-45.3zm-96 256c12.5-12.5 32.8-12.5 45.3 0l96 96c12.5 12.5 12.5 32.8 0 45.3l-96 96c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 416H96c-17.7 0-32 14.3-32 32v32c0 17.7-14.3 32-32 32s-32-14.3-32-32V448c0-53 43-96 96-96H242.7l-41.4-41.4c-12.5-12.5-12.5-32.8 0-45.3z"/></svg>',n.tooltip=!0,n.withText=!1,n.isToggleable=!0,n.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(n,"execute",(()=>t.execute("insertButtonGroup"))),n})),o.add("buttonGroupSize",(t=>this._createDropdown(t,"Size",r[s].icon,e.get("buttonGroupSize"),r,s))),o.add("buttonGroupColor",(t=>this._createDropdown(t,"Color",l[u].icon,e.get("buttonGroupColor"),l,u)))}afterInit(){this.editor.plugins.get(e.WidgetToolbarRepository).register("buttonGroup",{items:["buttonGroupSize","buttonGroupColor"],getRelatedElement:t=>{console.log("Selection",t),console.log("selection ancestors",t.focus.getAncestors()),console.log("selection nodes"),t.focus.getAncestors().find((t=>t)),t.focus.getAncestors().find((t=>t.hasClass("ucb-button-group")))}})}_createDropdown(t,e,o,n,r,s){const l=(0,i.createDropdown)(t);return(0,i.addToolbarToDropdown)(l,Object.entries(r).map((([e,o])=>this._createButton(t,o.label,o.icon,n,e)))),l.buttonView.set({label:t.t(e),icon:o,tooltip:!0,withText:!o}),o===r[s].icon&&l.buttonView.bind("icon").to(n,"value",(t=>r[t]?r[t].icon:r[s].icon)),l.bind("isEnabled").to(n,"isEnabled"),l}_createButton(t,e,o,n,r){const s=this.editor,l=new i.ButtonView;return l.set({label:t.t(e),icon:o,tooltip:!0,isToggleable:!0,withText:!o}),l.bind("isEnabled").to(n),l.bind("isOn").to(n,"value",(t=>t===r)),this.listenTo(l,"execute",(()=>{n.execute({value:r}),s.editing.view.focus()})),l}}class c extends t.Command{execute(){const{model:t}=this.editor;t.change((e=>{t.insertContent(function(t){const e=t.model,o=e.document.selection,n=t.createElement("buttonGroup",{buttonGroupColor:u,buttonGroupSize:s}),i=o.getFirstRange();for(const e of i.getItems())if("linkButton"==e.name){const o=!!e._children&&t.cloneElement(e._children._nodes[0]),i=e._clone();i._setAttribute("linkButtonColor",u),i._setAttribute("linkButtonSize",s),o&&t.append(o,i),t.append(i,n)}return n}(e))}))}refresh(){const t=this.editor.model,e=t.document.selection,o=e.getSelectedElement();if(o&&"buttonGroup"==o.name){o.getAttribute("buttonGroupColor"),o.getAttribute("buttonGroupSize");Array.from(o.getChildren()).forEach((t=>{t._setAttribute("linkButtonColor",u),t._setAttribute("linkButtonSize",s)}))}const n=t.schema.findAllowedParent(e.getFirstPosition(),"buttonGroup");var i;this.isEnabled=null!==n,this.existingButtonGroupSelected=(i=o)&&"buttonGroup"===i.name?o:null}}function d(t){const e=t.getFirstPosition();if(!e)return null;let o=e.parent;for(;o;){if(o.is("element")&&"buttonGroup"===o.name)return o;o=o.parent}return null}class b extends t.Command{attributeName;defaultValue;constructor(t,e,o){super(t),this.attributeName=e,this.defaultValue=o}refresh(){const t=d(this.editor.model.document.selection),e=this.attributeName,o=this.defaultValue;this.isEnabled=!!t,this.isEnabled?this.value=t.getAttribute(e):this.value=o}execute(t={value:""}){const e=this.editor.model,o=d(e.document.selection),n=this.attributeName,i=this.defaultValue;o&&e.change((e=>e.setAttribute(n,t.value||i,o)))}}class p extends t.Plugin{static get requires(){return[e.Widget]}init(){this._defineSchema(),this._defineConverters(),this._defineCommands()}_defineSchema(){this.editor.model.schema.register("buttonGroup",{allowWhere:"$block",isObject:!0,isInline:!0,allowAttributes:["buttonGroupColor","buttonGroupSize"],allowChildren:"linkButton"})}_defineConverters(){const{conversion:t,editing:o}=this.editor;t.attributeToAttribute(m("buttonGroupColor",l)),t.attributeToAttribute(m("buttonGroupSize",r)),t.for("upcast").elementToElement({model:"buttonGroup",view:{name:"div",classes:"ucb-button-group"}}),t.for("dataDowncast").elementToElement({model:"buttonGroup",view:{name:"div",classes:"ucb-button-group"}}),t.for("editingDowncast").elementToElement({model:"buttonGroup",view:(t,{writer:o})=>function(t,o=!1){const n=t.createContainerElement("div",{class:"ucb-button-group"});return o?(0,e.toWidget)(n,t,{label:"button group widget",hasSelectionHandle:!0}):n}(o,!0)})}_defineCommands(){const t=this.editor.commands;t.add("insertButtonGroup",new c(this.editor)),t.add("buttonGroupSize",new b(this.editor,"buttonGroupSize",s)),t.add("buttonGroupColor",new b(this.editor,"buttonGroupColor",u))}}function m(t,e){const o={};for(const[t,n]of Object.entries(e))o[t]={key:"class",value:n.className};return{model:{key:t,values:Object.keys(e)},view:o}}class g extends t.Plugin{static get requires(){return[p,a]}}const h={ButtonGroup:g}})(),n=n.default})()));