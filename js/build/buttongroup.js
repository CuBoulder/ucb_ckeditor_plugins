!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.buttongroup=t())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,t,o)=>{e.exports=o("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,o)=>{e.exports=o("dll-reference CKEditor5.dll")("./src/ui.js")},"ckeditor5/src/utils.js":(e,t,o)=>{e.exports=o("dll-reference CKEditor5.dll")("./src/utils.js")},"ckeditor5/src/widget.js":(e,t,o)=>{e.exports=o("dll-reference CKEditor5.dll")("./src/widget.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function o(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,o),n.exports}o.d=(e,t)=>{for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};return(()=>{"use strict";o.d(i,{default:()=>p});var e=o("ckeditor5/src/core.js"),t=o("ckeditor5/src/ui.js"),s=o("ckeditor5/src/utils.js");const n={large:{label:"Large",icon:e.icons.large,className:"ucb-link-button-large"},regular:{label:"Regular",icon:e.icons.regular,className:"ucb-link-button-regular"},small:{label:"Small",icon:e.icons.small,className:"ucb-link-button-small"}},r="regular",l={blue:{label:"Blue",className:"ucb-link-button-blue"},black:{label:"Black",className:"ucb-link-button-black"},gray:{label:"Gray",className:"ucb-link-button-gray"},white:{label:"White",className:"ucb-link-button-white"},gold:{label:"Gold",className:"ucb-link-button-gold"}},c="black";class u extends t.View{constructor(o,i){super(o),this.focusTracker=new s.FocusTracker,this.keystrokes=new s.KeystrokeHandler,this.colorDropdown=this._createSelectionDropdown(o,"Color",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">\x3c!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M162.4 6c-1.5-3.6-5-6-8.9-6h-19c-3.9 0-7.5 2.4-8.9 6L104.9 57.7c-3.2 8-14.6 8-17.8 0L66.4 6c-1.5-3.6-5-6-8.9-6H48C21.5 0 0 21.5 0 48V224v22.4V256H9.6 374.4 384v-9.6V224 48c0-26.5-21.5-48-48-48H230.5c-3.9 0-7.5 2.4-8.9 6L200.9 57.7c-3.2 8-14.6 8-17.8 0L162.4 6zM0 288v32c0 35.3 28.7 64 64 64h64v64c0 35.3 28.7 64 64 64s64-28.7 64-64V384h64c35.3 0 64-28.7 64-64V288H0zM192 432a16 16 0 1 1 0 32 16 16 0 1 1 0-32z"/></svg>\n',"color",l,c),this.sizeDropdown=this._createSelectionDropdown(o,"Size",n[r].icon,"size",n,r),this.set("size",r),this.set("color",c),this.saveButtonView=this._createButton("Save",e.icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton("Cancel",e.icons.cancel,"ck-button-cancel"),this.cancelButtonView.delegate("execute").to(this,"cancel"),this.childViews=this.createCollection([this.sizeDropdown,this.colorDropdown,this.saveButtonView,this.cancelButtonView]),this._focusCycler=new t.FocusCycler({focusables:this.childViews,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-button-form"],tabindex:"-1"},children:this.childViews})}render(){super.render(),(0,t.submitHandler)({view:this}),this.childViews._items.forEach((e=>{this.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){}_createInput(e){const o=new t.LabeledFieldView(this.locale,t.createLabeledInputText);return o.label=e,o}_createButton(e,o,i){const s=new t.ButtonView;return s.set({label:e,icon:o,tooltip:!0,class:i}),s}_createSelectionDropdown(e,o,i,s,n,r){const l=(0,t.createDropdown)(e),c=n[r];return(0,t.addToolbarToDropdown)(l,Object.entries(n).map((([t,o])=>this._createSelectableButton(e,o.label,o.icon,s,t)))),l.buttonView.set({icon:i,tooltip:e.t(o),withText:!i}),l.buttonView.bind("label").to(this,s,(t=>e.t(n[t]?n[t].label:c.label))),i===n[r].icon&&l.buttonView.bind("icon").to(this,s,(e=>n[e]?n[e].icon:c.icon)),l}_createSelectableButton(e,o,i,s,n){const r=new t.ButtonView;return r.set({label:e.t(o),icon:i,tooltip:!!i,isToggleable:!0,withText:!i}),r.bind("isOn").to(this,s,(e=>e===n)),this.listenTo(r,"execute",(()=>{this.set(s,n)})),r}}class a extends e.Plugin{static get requires(){return[t.ContextualBalloon]}init(){const e=this.editor,o=e.ui.componentFactory,i=e.commands.get("addButtonGroup"),s=e.editing.view.document;this._balloon=this.editor.plugins.get(t.ContextualBalloon),this.formView=this._createFormView(e.locale),this.buttonView=null,o.add("buttonGroup",(e=>{const o=new t.ButtonView(e);o.label="Button Group",o.icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--! Font Awesome Pro 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M297.4 9.4c12.5-12.5 32.8-12.5 45.3 0l96 96c12.5 12.5 12.5 32.8 0 45.3l-96 96c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L338.7 160H128c-35.3 0-64 28.7-64 64v32c0 17.7-14.3 32-32 32s-32-14.3-32-32V224C0 153.3 57.3 96 128 96H338.7L297.4 54.6c-12.5-12.5-12.5-32.8 0-45.3zm-96 256c12.5-12.5 32.8-12.5 45.3 0l96 96c12.5 12.5 12.5 32.8 0 45.3l-96 96c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 416H96c-17.7 0-32 14.3-32 32v32c0 17.7-14.3 32-32 32s-32-14.3-32-32V448c0-53 43-96 96-96H242.7l-41.4-41.4c-12.5-12.5-12.5-32.8 0-45.3z"/></svg>',o.tooltip=!0,o.withText=!1,o.isToggleable=!0,this.listenTo(o,"execute",(()=>{this._showUI(i.existingButtonGroupSelected)})),this.buttonView=o;const n=()=>{const e=i.existingButtonGroupSelected;o.isOn=!!e};return this.listenTo(i,"change:value",n),this.listenTo(i,"change:existingButtonSelected",n),this.listenTo(s,"click",(()=>{i.existingButtonGroupSelected&&this._showUI(i.existingButtonGroupSelected)})),o.bind("isOn","isEnabled").to(i,"value","isEnabled"),o}))}_createFormView(e){const o=this.editor,i=o.ui.componentFactory,s=new u(e,i);return this.listenTo(s,"submit",(()=>{const e={color:s.color,size:s.size};o.execute("addButtonGroup",e),this._hideUI()})),this.listenTo(s,"cancel",(()=>{this._hideUI()})),s.keystrokes.set("Esc",((e,t)=>{this._hideUI(),t()})),(0,t.clickOutsideHandler)({emitter:s,activator:()=>this._balloon.visibleView===s,contextElements:[this._balloon.view.element],callback:()=>this._hideUI()}),s}_showUI(e){this.editor.model.document.selection;this.buttonView.isOn=!0;const t=this.editor.commands.get("addButtonGroup").value;if(this._balloon.visibleView&&this._balloon.visibleView===this.formView||this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),e){const t=e.getAttribute("buttonGroupSize"),o=e.getAttribute("buttonGroupColor");this.formView.color=o,this.formView.size=t}t&&(this.formView.colorDropdown.fieldView.value=t.color,this.formView.sizeDropdown.fieldView.value=t.size),this.formView.focus()}_hideUI(){this.formView.element.reset(),this.buttonView.isOn=!1,this._balloon.remove(this.formView),this.editor.editing.view.focus()}_getBalloonPositionData(){const e=this.editor.editing.view,t=e.document;let o=null;return o=()=>e.domConverter.viewRangeToDom(t.selection.getFirstRange()),{target:o}}}class d extends e.Command{constructor(e){super(e),this.set("existingButtonGroupSelected",!1)}execute({value:e="",size:t=r,color:o=c,classes:i=""}){const s=this.editor.model,n=s.document.selection;s.change((e=>{const i=n.getFirstRange(),r=e.createElement("buttonGroup",{buttonGroupColor:o,buttonGroupSize:t});for(const s of i.getItems())if("linkButton"==s.name){const i=!!s._children&&e.cloneElement(s._children._nodes[0]),n=s._clone();n._setAttribute("linkButtonColor",o),n._setAttribute("linkButtonSize",t),i&&e.append(i,n),e.append(n,r)}s.insertContent(r)}))}refresh(){const e=this.editor.model,t=e.document.selection,o=t.getSelectedElement();if(o&&"buttonGroup"==o.name){const e=o.getAttribute("buttonGroupColor"),t=o.getAttribute("buttonGroupSize");Array.from(o.getChildren()).forEach((o=>{console.log("button",o),o._setAttribute("linkButtonColor",e),o._setAttribute("linkButtonSize",t)}))}const i=e.schema.findAllowedParent(t.getFirstPosition(),"buttonGroup");var s;this.isEnabled=null!==i,this.existingButtonGroupSelected=(s=o)&&"buttonGroup"===s.name?o:null}}var h=o("ckeditor5/src/widget.js");class b extends e.Plugin{static get requires(){return[h.Widget]}init(){this._defineSchema(),this._defineConverters(),this.editor.commands.add("addButtonGroup",new d(this.editor))}_defineSchema(){this.editor.model.schema.register("buttonGroup",{allowWhere:"$block",isObject:!0,isInline:!0,allowAttributes:["buttonGroupColor","buttonGroupSize"],allowChildren:"linkButton"})}_defineConverters(){const{conversion:e}=this.editor;e.attributeToAttribute(w("buttonGroupColor",l)),e.attributeToAttribute(w("buttonGroupSize",n)),e.for("upcast").elementToElement({model:"buttonGroup",view:{name:"div",classes:"ucb-button-group"}}),e.for("dataDowncast").elementToElement({model:"buttonGroup",view:{name:"div",classes:"ucb-button-group"}}),e.for("editingDowncast").elementToElement({model:"buttonGroup",view:(e,{writer:t})=>(0,h.toWidget)(t.createContainerElement("div",{class:"ucb-button-group"}),t,{label:"button group widget"})})}}function w(e,t){const o={};for(const[e,i]of Object.entries(t))o[e]={key:"class",value:i.className};return{model:{key:e,values:Object.keys(t)},view:o}}class m extends e.Plugin{static get requires(){return[b,a]}}const p={ButtonGroup:m}})(),i=i.default})()));