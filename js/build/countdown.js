!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.countdown=t())}(self,(()=>(()=>{var e=[(e,t,o)=>{e.exports=o(1)("./src/core.js")},e=>{"use strict";e.exports=CKEditor5.dll},(e,t,o)=>{e.exports=o(1)("./src/ui.js")},,(e,t,o)=>{e.exports=o(1)("./src/widget.js")},(e,t,o)=>{e.exports=o(1)("./src/utils.js")}],t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,o),s.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{"use strict";o.d(n,{default:()=>p});var e=o(0);const t={solid:{label:"Solid",className:"countdown-solid"},transparent:{label:"Transparent",className:"countdown-transparent"}},i="transparent",s={inline:{label:"Inline",className:"countdown-inline"},stacked:{label:"Stacked",className:"countdown-stacked"}},c="inline";class a extends e.Command{constructor(e){super(e),this.set("existingCountdownSelected",!1)}execute({style:e=c,background:t=i,date:o}){const n=this.editor.model,s=n.document.selection;n.change((i=>{s.getFirstRange();const c=i.createElement("cuCountdown",{cuCountdownBackground:t,cuCountdownStyle:e});i.insert(o,c),n.insertContent(c)}))}refresh(){const e=this.editor.model,t=e.document.selection,o=t.getSelectedElement(),n=e.schema.findAllowedParent(t.getFirstPosition(),"cuCountdown");var i;this.isEnabled=null!==n,this.existingCountdownSelected=(i=o)&&"cuCountdown"===i.name?o:null}}var r=o(4);class l extends e.Plugin{static get requires(){return[r.Widget]}init(){this._defineSchema(),this._defineConverters(),this.editor.commands.add("addCountdown",new a(this.editor))}_defineSchema(){this.editor.model.schema.register("cuCountdown",{allowWhere:"$text",isObject:!0,isInline:!0,allowAttributes:["cuCountdownBackground","cuCountdownStyle","aria-hidden"],allowContentOf:"$block"})}_defineConverters(){const{conversion:e}=this.editor;e.attributeToAttribute(d("cuCountdownBackground",t)),e.attributeToAttribute(d("cuCountdownStyle",s)),e.for("upcast").elementToElement({model:"cuCountdown",view:{name:"span",classes:"ucb-countdown"}}),e.for("dataDowncast").elementToElement({model:"cuCountdown",view:{name:"span",classes:"ucb-countdown",attributes:{"aria-hidden":"true"}}}),e.for("editingDowncast").elementToElement({model:"cuCountdown",view:(e,{writer:t})=>(0,r.toWidget)(t.createContainerElement("span",{class:"ucb-countdown",attributes:{"aria-hidden":"true"}}),t,{label:"Countdown Widget"})})}}function d(e,t){const o={};for(const[e,n]of Object.entries(t))o[e]={key:"class",value:n.className};return{model:{key:e,values:Object.keys(t)},view:o}}var u=o(2),w=o(5);class h extends u.View{constructor(o,n){super(o),this.focusTracker=new w.FocusTracker,this.keystrokes=new w.KeystrokeHandler,this.backgroundDropdown=this._createSelectionDropdown(o,"Background",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">\x3c!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M162.4 6c-1.5-3.6-5-6-8.9-6h-19c-3.9 0-7.5 2.4-8.9 6L104.9 57.7c-3.2 8-14.6 8-17.8 0L66.4 6c-1.5-3.6-5-6-8.9-6H48C21.5 0 0 21.5 0 48V224v22.4V256H9.6 374.4 384v-9.6V224 48c0-26.5-21.5-48-48-48H230.5c-3.9 0-7.5 2.4-8.9 6L200.9 57.7c-3.2 8-14.6 8-17.8 0L162.4 6zM0 288v32c0 35.3 28.7 64 64 64h64v64c0 35.3 28.7 64 64 64s64-28.7 64-64V384h64c35.3 0 64-28.7 64-64V288H0zM192 432a16 16 0 1 1 0 32 16 16 0 1 1 0-32z"/></svg>\n',"background",t,i),this.styleDropdown=this._createSelectionDropdown(o,"Style",e.icons.objectInline,"style",s,c),this.dateInputView=this._createInput("Add Date (MM/DD/YYYY hh:mm:ss)"),this.set("background",i),this.set("style",c),this.dateInputView.fieldView.bind("date").to(this,"date"),this.set("date","MM/DD/YYYY hh:mm:ss"),this.saveButtonView=this._createButton("Save",e.icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton("Cancel",e.icons.cancel,"ck-button-cancel"),this.cancelButtonView.delegate("execute").to(this,"cancel"),this.childViews=this.createCollection([this.backgroundDropdown,this.styleDropdown,this.dateInputView,this.saveButtonView,this.cancelButtonView]),this._focusCycler=new u.FocusCycler({focusables:this.childViews,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-countdown-form"],tabindex:"-1"},children:this.childViews})}render(){super.render(),(0,u.submitHandler)({view:this}),this.childViews._items.forEach((e=>{this.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.dateInputView.isEnabled,this.dateInputView.focus()}_createInput(e){const t=new u.LabeledFieldView(this.locale,u.createLabeledInputText);return t.label=e,t}_createButton(e,t,o){const n=new u.ButtonView;return n.set({label:e,icon:t,tooltip:!0,class:o}),n}_createSelectionDropdown(e,t,o,n,i,s){const c=(0,u.createDropdown)(e),a=i[s];return(0,u.addToolbarToDropdown)(c,Object.entries(i).map((([t,o])=>this._createSelectableButton(e,o.label,o.icon,n,t)))),c.buttonView.set({icon:o,tooltip:e.t(t),withText:!o}),c.buttonView.bind("label").to(this,n,(t=>e.t(i[t]?i[t].label:a.label))),o===i[s].icon&&c.buttonView.bind("icon").to(this,n,(e=>i[e]?i[e].icon:a.icon)),c}_createSelectableButton(e,t,o,n,i){const s=new u.ButtonView;return s.set({label:e.t(t),icon:o,tooltip:!!o,isToggleable:!0,withText:!o}),s.bind("isOn").to(this,n,(e=>e===i)),this.listenTo(s,"execute",(()=>{this.set(n,i)})),s}}class m extends e.Plugin{static get requires(){return[u.ContextualBalloon]}static get pluginName(){return"CountdownUI"}init(){const e=this.editor,t=e.ui.componentFactory,o=e.commands.get("addCountdown"),n=e.editing.view.document;this._balloon=this.editor.plugins.get(u.ContextualBalloon),this.formView=this._createFormView(e.locale),this.buttonView=null,t.add("countdown",(e=>{const t=new u.ButtonView(e);t.label="Countdown",t.icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">\x3c!--! Font Awesome Pro 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M24 0C10.7 0 0 10.7 0 24S10.7 48 24 48h8V67c0 40.3 16 79 44.5 107.5L158.1 256 76.5 337.5C48 366 32 404.7 32 445v19H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H360c13.3 0 24-10.7 24-24s-10.7-24-24-24h-8V445c0-40.3-16-79-44.5-107.5L225.9 256l81.5-81.5C336 146 352 107.3 352 67V48h8c13.3 0 24-10.7 24-24s-10.7-24-24-24H24zM192 289.9l81.5 81.5C293 391 304 417.4 304 445v19H80V445c0-27.6 11-54 30.5-73.5L192 289.9zm0-67.9l-81.5-81.5C91 121 80 94.6 80 67V48H304V67c0 27.6-11 54-30.5 73.5L192 222.1z"/></svg>',t.tooltip=!0,t.withText=!1,t.isToggleable=!0,this.listenTo(t,"execute",(()=>{this._showUI(o.existingCountdownSelected)})),this.buttonView=t;const i=()=>{const e=o.existingCountdownSelected;t.isOn=!!e};return this.listenTo(o,"change:value",i),this.listenTo(o,"change:existingCountdownSelected",i),this.listenTo(n,"click",(()=>{o.existingCountdownSelected&&this._showUI(o.existingCountdownSelected)})),this.on("showUI",((e,t)=>{this._showUI(t)})),t.bind("isOn","isEnabled").to(o,"value","isEnabled"),t}))}_createFormView(e){const t=this.editor,o=t.ui.componentFactory,n=new h(e,o);return this.listenTo(n,"submit",(()=>{const e={date:n.dateInputView.fieldView.element.value,background:n.background,style:n.style};t.execute("addCountdown",e),this._hideUI()})),this.listenTo(n,"cancel",(()=>{this._hideUI()})),n.keystrokes.set("Esc",((e,t)=>{this._hideUI(),t()})),(0,u.clickOutsideHandler)({emitter:n,activator:()=>this._balloon.visibleView===n,contextElements:[this._balloon.view.element],callback:()=>this._hideUI()}),n}_showUI(e){this.buttonView.isOn=!0,this._balloon.visibleView&&this._hideUI();const t=this.editor.commands.get("addCountdown").value;if(this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),e){const t=e.getAttribute("cuCountdownBackground"),o=e.getAttribute("cuCountdownStyle"),n=e.getChild(0);if(n&&n.data){const e=n.data;this.formView.background=t,this.formView.style=o,this.formView.dateInputView.fieldView.value=e,this.formView.dateInputView.fieldView.element.value=e,this.formView.dateInputView.fieldView.set("value",e)}}t&&(this.formView.dateInputView.fieldView.value=t.date,this.formView.backgroundDropdown.fieldView.value=t.background,this.formView.styleDropdown.fieldView.value=t.style),setTimeout((()=>{this.formView.dateInputView.fieldView.focus()}),0)}_hideUI(){this._balloon.hasView(this.formView)&&(this.formView.element.reset(),this.buttonView.isOn=!1,this._balloon.remove(this.formView),this.editor.editing.view.focus())}_getBalloonPositionData(){const e=this.editor.editing.view,t=e.document;let o=null;return o=()=>e.domConverter.viewRangeToDom(t.selection.getFirstRange()),{target:o}}}class b extends e.Plugin{static get requires(){return[l,m]}}const p={Countdown:b}})(),n=n.default})()));